<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fractal 0</title>
</head>
<body>
  <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    body {
        display: grid;
        place-content: center;
        gap: 2rem;
        min-height: 100vh;
        background: black;
        color: #fff;
      }
      #canv {
        border: 1px solid #222;
      }
      #btn {
        padding: .7em;
        background: #333;
        font-size: 1rem;
        color: #fff;
        cursor: pointer;
        &:hover {background: #444;}
    }
  </style>
  <h2>Dynamic Title</h2>
  <canvas id="canv"></canvas>
  <button id="btn">New Measure</button>

<script>
const ctx = canv.getContext("2d"),
  btn  = document.getElementById('btn'),
  rand = Math.random,
  SIZE = 600;
canv.height = SIZE;
canv.width = SIZE;
ctx.lineCap = 'round';

function drawFractal(){
  const lineWidth = Math.floor(rand() * 11) + 4,
    hue = rand() * 360,
    sides = 4,
    maxLevel = 4,
    spread = rand() * 4 - 2,
    scale = rand() * 0.1 + 0.6,
    branches = Math.floor(rand() * 2) + 2;

  ctx.clearRect(0, 0, SIZE, SIZE);
  ctx.lineWidth = lineWidth;
  ctx.save();
  ctx.translate(SIZE/2, SIZE/2);
  for (let i = 0; i < sides; i++){
      drawBranch(0, maxLevel, spread, scale, branches, hue);
      ctx.rotate(Math.PI * 2 / sides);
  }
  ctx.restore();
}

function drawBranch(level, maxLevel, spread, scale, branches, hue){
    if (level > maxLevel) return;
    const branchSize = 110;
    const li = 10 + level * 10;
    ctx.strokeStyle = `hsl(${hue}, 100%, ${li}%)`;
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.lineTo(branchSize, 0);
    ctx.stroke();

    for (let i = 0; i < branches; i++){
        const position = branchSize - (branchSize / branches) * i;
        ctx.save();
        ctx.translate(position, 0);
        ctx.scale(scale, scale);
        ctx.rotate(spread);
        drawBranch(level + 1, maxLevel, spread, scale, branches, hue);
        ctx.restore();
    }
}

drawFractal();
btn.addEventListener('click', drawFractal);
</script>
</body>
</html>
